<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>ホーム画面</title>
	<link rel="stylesheet" th:href="@{/css/home.css}">
	<link rel="stylesheet" th:href="@{/css/common/header.css}">
</head>

<body>
	<header class="hidden" th:replace="~{html/common/header :: layout-header}"></header>
	
	<!-- 固定ナビゲーションボタン（ページ最上部でのみ表示） -->
	<nav id="fixed-nav" class="fixed-nav">
		<a th:href="@{/card/list}" class="fixed-nav-link">カードリスト</a>
		<a th:href="@{/choice/leader}" class="fixed-nav-link">デッキ作成</a>
		<a th:href="@{/deck/list}" class="fixed-nav-link">デッキ一覧</a>
		<a th:href="@{/setting}" class="fixed-nav-link">設定</a>
		<a th:if="${session.role} == 'admin'" th:href="@{/admin/config}" class="fixed-nav-link admin-link">管理者設定</a>
	</nav>
	
	<!-- スプラッシュ -->
	<section id="splash-section">
		<div id="splash-content">
			<img th:src="@{/img/onepiececard_logo.png}" id="splash-logo">
		</div>
	</section>
	
	<main>
		<!-- ホーム画面（最初は非表示） -->
		<section id="home-section" class="hidden">
			<div class="background-section section-1"></div>
			<div class="background-section section-2">
				<h2>我々は、挑み続ける。</h2>
				<p>
					今までにないサービスや商品を生み出し、提供し続けます。<br>
					常に価値を磨き続け、利用者様の期待を超える体験を創造します。<br><br>
					利用者様が求めるものをただ形にするのではなく、<br>
					その一歩先を見据え、まだ誰も見たことのない価値を届けることを目指しています。<br><br>
					利用者様の声に耳を傾け、本当に求められている価値とは何かを追求し続けます。<br>
					そして、その価値が確かな形となり、<br>
					プレイヤーを支える存在となるよう、責任を持って行動していきます。<br><br>
					私たちは、これからも挑戦の歩みを止めません。<br>
					常に考え、学び続け、利用者様の期待を超える新たな可能性を生み出し続けます。
				</p>
			</div>
			<div class="background-section section-3">
				<video class="section-3-video" autoplay muted loop playsinline>
				    <source th:src="@{/video/onepiece_video_1.mp4}" type="video/mp4">
				    お使いのブラウザは動画タグをサポートしていません。
				</video>
			</div>
			<div class="background-section section-4"></div>
		</section>
	</main>
	
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const header = document.querySelector("header");
			const fixedNav = document.getElementById("fixed-nav");
			const scrollThreshold = 50;
			
			// スプラッシュ表示中はスクロールを無効化
			document.body.style.overflow = "hidden";
			
			// ロゴのアニメーションが終わるころに実行（3秒に延長）
			setTimeout(() => {
				const splash = document.getElementById("splash-section");
				const home = document.getElementById("home-section");
				
				// スプラッシュ画面をフェードアウト
				splash.style.opacity = "0";
				splash.style.transition = "opacity 0.5s ease";
				
				// スプラッシュ画面を完全に非表示にしてからホーム画面を表示
				setTimeout(() => {
					splash.style.display = "none";
					
					// スクロールを再度有効化
					document.body.style.overflow = "auto";
					
					// ヘッダーを表示可能にする（最初は非表示状態）
					if (header) {
						header.classList.remove("hidden");
						header.classList.add("header-hidden");
					}
					home.classList.remove("hidden");
					
					// 固定ナビゲーションを表示
					if (fixedNav) {
						fixedNav.classList.add("show");
					}
					
					// 次のタイミングでホーム画面をフェードイン
					setTimeout(() => {
						home.classList.add("show");
					}, 10);
				}, 500);
				
			}, 3000);
			
			// スクロールに応じてヘッダーと固定ナビゲーションの表示/非表示を切り替え
			window.addEventListener("scroll", () => {
				const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
				
				if (scrollTop <= scrollThreshold) {
					// 最上部付近ではヘッダーを非表示、固定ナビゲーションを表示
					if (header) {
						header.classList.add("header-hidden");
					}
					if (fixedNav) {
						fixedNav.classList.add("show");
					}
				} else {
					// スクロールしたらヘッダーを表示、固定ナビゲーションを非表示
					if (header) {
						header.classList.remove("header-hidden");
					}
					if (fixedNav) {
						fixedNav.classList.remove("show");
					}
				}
				
				// section-2のテキストアニメーション
				const section2 = document.querySelector('.section-2');
				const section2Text = document.querySelectorAll('.section-2 h2, .section-2 p');
				
				if (section2) {
					const section2Top = section2.getBoundingClientRect().top;
					const windowHeight = window.innerHeight;
					
					// section-2が画面の半分まで来たら表示
					if (section2Top < windowHeight / 2) {
						section2Text.forEach(el => {
							el.classList.add('show');
						});
					}
				}
			});
		});
	</script>
</body>

</html>